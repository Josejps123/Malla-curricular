<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Malla Ingeniería Civil de Minas</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f2f2f2;
      margin: 0;
      padding: 20px;
    }
    .malla {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 10px;
    }
    .semestre {
      background-color: #ffffff;
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 10px;
    }
    .asignatura {
      margin-bottom: 5px;
      padding: 5px 5px 5px 24px;
      border-left: 4px solid #005b96;
      background-color: #e9f1f7;
      opacity: 0.4;
      position: relative;
      cursor: pointer;
      user-select: none;
    }
    .asignatura.desbloqueada {
      opacity: 1;
      pointer-events: auto;
    }
    .asignatura.aprobada {
      background-color: #b6e2b6 !important;
      border-left-color: #2e8b57 !important;
      opacity: 1;
    }
    .creditos {
      font-size: 12px;
      color: #555;
    }
    .estado-circulo {
      position: absolute;
      right: 6px;
      top: 50%;
      transform: translateY(-50%);
      width: 20px;
      height: 20px;
      border: 2px solid #005b96;
      border-radius: 50%;
      background-color: transparent;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      color: white;
    }
    .asignatura.aprobada .estado-circulo {
      background-color: #2e8b57;
      border-color: #2e8b57;
    }
    .asignatura.aprobada .estado-circulo::after {
      content: "✔";
    }
  </style>
</head>
<body>
  <h1>Malla Curricular Ingeniería Civil de Minas</h1>
  <p id="creditos-totales">Créditos aprobados: 0</p>
  <button id="reset">Reiniciar progreso</button>
  <div class="malla">
       <!-- SEMESTRE 1 -->
    <div class="semestre">
      <h2>Semestre 1</h2>
      <div class="asignatura" data-sigla="ICR010">Antropología Cristiana <div class="creditos">2 créditos</div></div>
      <div class="asignatura" data-sigla="MIN140">Introducción a la Ingeniería de Minas <div class="creditos">6 créditos</div></div>
      <div class="asignatura" data-sigla="MAT115">Cálculo Diferencial <div class="creditos">6 créditos</div></div>
      <div class="asignatura" data-sigla="MAT116">Álgebra <div class="creditos">6 créditos</div></div>
    </div>

    <!-- SEMESTRE 2 -->
    <div class="semestre">
      <h2>Semestre 2</h2>
      <div class="asignatura" data-sigla="EIQ150">Métodos Numéricos y Programación <div class="creditos">4 créditos</div></div>
      <div class="asignatura" data-sigla="MAT117">Cálculo Integral y Series <div class="creditos">4 créditos</div></div>
      <div class="asignatura" data-sigla="FIS131">Física General Mecánica 1 <div class="creditos">4 créditos</div></div>
      <div class="asignatura" data-sigla="ICR020">Ética Cristiana <div class="creditos">2 créditos</div></div>
      <div class="asignatura" data-sigla="QUI222">Química General e Inorgánica <div class="creditos">6 créditos</div></div>
    </div>

    <!-- SEMESTRE 3 -->
    <div class="semestre">
      <h2>Semestre 3</h2>
      <div class="asignatura" data-sigla="EIQ250">Dibujo de Ingeniería <div class="creditos">3 créditos</div></div>
      <div class="asignatura" data-sigla="MAT215">Cálculo en Varias Variables <div class="creditos">5 créditos</div></div>
      <div class="asignatura" data-sigla="LCL227">Expresión Oral y Escrita <div class="creditos">2 créditos</div></div>
      <div class="asignatura" data-sigla="FIS231">Física General Mecánica 2 <div class="creditos">4 créditos</div></div>
      <div class="asignatura" data-sigla="QUI220">Química Analítica <div class="creditos">5 créditos</div></div>
      <div class="asignatura" data-sigla="FORM1">Formación Fundamental 1 <div class="creditos">2 créditos</div></div>
    </div>

    <!-- SEMESTRE 4 -->
    <div class="semestre">
      <h2>Semestre 4</h2>
      <div class="asignatura" data-sigla="EIQ242">Elementos de Fisico química <div class="creditos">4 créditos</div></div>
      <div class="asignatura" data-sigla="MAT217">Ecuaciones Diferenciales <div class="creditos">6 créditos</div></div>
      <div class="asignatura" data-sigla="EST224">Probabilidad e Inferencia Estadística <div class="creditos">4 créditos</div></div>
      <div class="asignatura" data-sigla="FIS331">Física General Electromagnetismo <div class="creditos">4 créditos</div></div>
    </div>

    <!-- SEMESTRE 5 -->
    <div class="semestre">
      <h2>Semestre 5</h2>
      <div class="asignatura" data-sigla="MIN310">Topografía Minera <div class="creditos">4 créditos</div></div>
      <div class="asignatura" data-sigla="MIN320">Geología Minera <div class="creditos">3 créditos</div></div>
      <div class="asignatura" data-sigla="MIN330">Operaciones y Procesos en Minería <div class="creditos">3 créditos</div></div>
      <div class="asignatura" data-sigla="EIQ342">Termodinámica General <div class="creditos">4 créditos</div></div>
      <div class="asignatura" data-sigla="EIE349">Sistema de Potencia en Instalaciones Mineras <div class="creditos">4 créditos</div></div>
      <div class="asignatura" data-sigla="ING9001">Inglés 1 <div class="creditos">2 créditos</div></div>

    </div>

    <!-- SEMESTRE 6 -->
    <div class="semestre">
      <h2>Semestre 6</h2>
      <div class="asignatura" data-sigla="MIN360">Petrología <div class="creditos">4 créditos</div></div>
      <div class="asignatura" data-sigla="MIN388">Procesamiento de Minerales <div class="creditos">3 créditos</div></div>
      <div class="asignatura" data-sigla="EIQ356">Mecánica de Fluidos <div class="creditos">4 créditos</div></div>
      <div class="asignatura" data-sigla="MIN375">Resistencia de Materiales <div class="creditos">3 créditos</div></div>
      <div class="asignatura" data-sigla="ING9002">Inglés 2 <div class="creditos">2 créditos</div></div> 
      <div class="asignatura" data-sigla="MIN380">Perforación y Tronadura <div class="creditos">4 créditos</div></div>
    </div>

    <!-- SEMESTRE 7 -->
    <div class="semestre">
      <h2>Semestre 7</h2>
      <div class="asignatura" data-sigla="MIN410">Mecánica de Rocas <div class="creditos">3 créditos</div></div>
      <div class="asignatura" data-sigla="MIN420">Geología Económica <div class="creditos">3 créditos</div></div>
      <div class="asignatura" data-sigla="MIN430">Seguridad Minera <div class="creditos">3 créditos</div></div>
      <div class="asignatura" data-sigla="ING9003">Inglés 3 <div class="creditos">2 créditos</div></div>
      <div class="asignatura" data-sigla="MIN440">Ventilación <div class="creditos">3 créditos</div></div>
      <div class="asignatura" data-sigla="MIN444">Carguío y Transporte <div class="creditos">2 créditos</div></div>
      <div class="asignatura" data-sigla="ICA533">Análisis Económico <div class="creditos">4 créditos</div></div>
    </div>

    <!-- SEMESTRE 8 -->
    <div class="semestre">
      <h2>Semestre 8</h2>
      <div class="asignatura" data-sigla="MIN460">Métodos de Explotación Minera <div class="creditos">4 créditos</div></div>
      <div class="asignatura" data-sigla="ING9004">Inglés 4 <div class="creditos">2 créditos</div></div>
      <div class="asignatura" data-sigla="MIN470">Evaluación de Recursos y Reservas <div class="creditos">4 créditos</div></div>
      <div class="asignatura" data-sigla="MIN480">Gestión Ambiental Minera <div class="creditos">4 créditos</div></div>
      <div class="asignatura" data-sigla="MIN485">Cálculo de Procesos Mineros <div class="creditos">3 créditos</div></div>
      <div class="asignatura" data-sigla="EIQ542">Computación Aplicada <div class="creditos">4 créditos</div></div>
    </div>

    <!-- SEMESTRE 9 -->
    <div class="semestre">
      <h2>Semestre 9</h2>
      <div class="asignatura" data-sigla="MIN510">Diseño de Minas a Cielo Abierto <div class="creditos">4 créditos</div></div>
      <div class="asignatura" data-sigla="OPT1">Optativo 1 <div class="creditos">3 créditos</div></div>
      <div class="asignatura" data-sigla="DER404">Legislación Laboral <div class="creditos">2 créditos</div></div>
      <div class="asignatura" data-sigla="MIN520">Derecho Minero <div class="creditos">2 créditos</div></div>
      <div class="asignatura" data-sigla="MIN540">Laboratorio de Procesamiento de Minerales <div class="creditos">2 créditos</div></div>
      <div class="asignatura" data-sigla="EII604">Administración y Organización <div class="creditos">3 créditos</div></div>
      <div class="asignatura" data-sigla="EIQ571">Recursos Minerales, Minería y Mercado <div class="creditos">3 créditos</div></div>
      <div class="asignatura" data-sigla="FORM2">Formación Fundamental 2 <div class="creditos">2 créditos</div></div>
    </div>

    <!-- SEMESTRE 10 -->
    <div class="semestre">
      <h2>Semestre 10</h2>
      <div class="asignatura" data-sigla="MIN560">Diseño de Minas Subterráneas <div class="creditos">4 créditos</div></div>
      <div class="asignatura" data-sigla="MIN590">Proyecto 1 <div class="creditos">3 créditos</div></div>
      <div class="asignatura" data-sigla="MIN570">Sostenibilidad Minera <div class="creditos">3 créditos</div></div>
      <div class="asignatura" data-sigla="EIQ657">Ingeniería Económica <div class="creditos">4 créditos</div></div>
      <div class="asignatura" data-sigla="EII609">Investigación de Operaciones <div class="creditos">3 créditos</div></div>
      <div class="asignatura" data-sigla="OPT2">Optativo 2 <div class="creditos">3 créditos</div></div>
      <div class="asignatura" data-sigla="FORM3">Formación Fundamental 3 <div class="creditos">2 créditos</div></div>
    </div>

    <!-- SEMESTRE 11 -->
    <div class="semestre">
      <h2>Semestre 11</h2>
      <div class="asignatura" data-sigla="MIN640">Proyecto 2 <div class="creditos">6 créditos</div></div>
      <div class="asignatura" data-sigla="MIN620">Gestión de Proyectos Mineros <div class="creditos">3 créditos</div></div>
      <div class="asignatura" data-sigla="MIN630">Diseño y Evaluación de Proyectos <div class="creditos">4 créditos</div></div>
      <div class="asignatura" data-sigla="OPT3">Optativo 3 <div class="creditos">3 créditos</div></div>    
    </div>

    <!-- SEMESTRE 12 -->
    <div class="semestre">
      <h2>Semestre 12</h2>
      <div class="asignatura" data-sigla="MIN680">Proyecto de Título <div class="creditos">12 créditos</div></div>
      <div class="asignatura" data-sigla="OPT4">Optativo 4 <div class="creditos">3 créditos</div></div>
      <div class="asignatura" data-sigla="PRM106">Practica Profesional <divc class="creditos">6 créditos</div></div>
</div> <!-- cierre de .semestre 12 -->
</div> <!-- cierre de .malla -->
  </div>
  </div>
  <script>
    const prerrequisitos = {
      "MAT117": ["MAT115"],
      "MAT215": ["MAT117"],
      "MAT217": ["MAT215"],
      "EST224": ["MAT215"],
      "FIS231": ["FIS131"],
      "FIS331": ["FIS231"],
      "EIQ150": ["MIN140"],
      "EIQ242": ["EIQ150"],
      "EIQ342": ["EIQ242"],
      "EIQ356": ["EIQ342"],
      "QUI220": ["QUI222"],
      "EIQ250": ["MIN140"],
      "MIN320": ["QUI220"],
      "MIN360": ["MIN320"],
      "MIN375": ["FIS231"],
      "MIN380": ["EIE349"],
      "MIN388": ["MIN330"],
      "MIN410": ["MIN360"],
      "MIN420": ["MIN320"],
      "MIN430": ["MIN330"],
      "MIN444": ["MIN330"],
      "MIN440": ["EIQ356"],
      "MIN460": ["MIN410", "MIN380"],
      "MIN470": ["MIN420"],
      "MIN480": ["MIN330"],
      "MIN485": ["MIN388"],
      "MIN510": ["MIN460"],
      "MIN520": ["MIN430"],
      "MIN540": ["MIN485"],
      "MIN560": ["MIN460"],
      "MIN570": ["MIN480"],
      "MIN620": ["EII604"],
      "MIN630": ["EIQ657", "EII609"],
      "MIN640": ["MIN590"],
      "MIN680": ["MIN640"],
      "ING9002": ["ING9001"],
      "ING9003": ["ING9002"],
      "ING9004": ["ING9003"],
      "EIQ657": ["EII604"],
      "EIQ542": ["MIN440"],
      "EII609": ["EIQ542"],
      "EIE349": ["FIS331"],
      "DER404": ["MIN430"],
      "EII604": ["ICA533"]
    };

    const creditosNecesarios = {
      "ING9001": 19,
      "MIN310": 55,
      "ICA533": 90,
      "MIN590": 170
    };
    const asignaturas = document.querySelectorAll('.asignatura');
    let aprobadas = JSON.parse(localStorage.getItem('aprobadas')) || [];

    function actualizarEstado() {
      let totalCreditos = 0;
      asignaturas.forEach(asig => {
        const sigla = asig.dataset.sigla;
        if (aprobadas.includes(sigla)) {
          const creditosText = asig.querySelector('.creditos')?.textContent || '';
          const match = creditosText.match(/(\d+)/);
          if (match) totalCreditos += parseInt(match[1]);
        }
      });
      document.getElementById('creditos-totales').textContent = `Créditos aprobados: ${totalCreditos}`;

      asignaturas.forEach(asig => {
        const sigla = asig.dataset.sigla;
        const prereqs = prerrequisitos[sigla] || [];
        const requiereCreditos = creditosNecesarios[sigla] || 0;

        const tienePrerrequisitosAprobados = prereqs.every(pr => aprobadas.includes(pr));
        const cumpleCreditos = totalCreditos >= requiereCreditos;

        const tieneRequisitos = prereqs.length > 0 || requiereCreditos > 0;
        const puedeDesbloquear = (!tieneRequisitos) || (tienePrerrequisitosAprobados && cumpleCreditos);

        if (aprobadas.includes(sigla)) {
          asig.classList.add('aprobada');
        } else if (puedeDesbloquear) {
          asig.classList.add('desbloqueada');
        } else {
          asig.classList.remove('desbloqueada');
        }
      });
    }

    asignaturas.forEach(asig => {
      if (!asig.querySelector('.estado-circulo')) {
        const circulo = document.createElement('span');
        circulo.classList.add('estado-circulo');
        asig.appendChild(circulo);
      }

      asig.addEventListener('click', () => {
        const sigla = asig.dataset.sigla;
        const esDesbloqueada = asig.classList.contains('desbloqueada') || asig.classList.contains('aprobada');

        if (!esDesbloqueada) return;

        if (aprobadas.includes(sigla)) {
          aprobadas = aprobadas.filter(s => s !== sigla);
        } else {
          aprobadas.push(sigla);
        }

        localStorage.setItem('aprobadas', JSON.stringify(aprobadas));
        actualizarEstado();
      });
    });

    document.getElementById('reset').addEventListener('click', () => {
      if (confirm("¿Estás seguro de que quieres reiniciar tu progreso?")) {
        localStorage.removeItem('aprobadas');
        aprobadas = [];
        actualizarEstado();
      }
    });

    actualizarEstado();
  </script>
</body>
</html>

